import { createElement } from "react";
import { shallow, ShallowWrapper } from "enzyme";
import { Platform } from "react-native";

import { HelloWorld, HelloWorldProps } from "../HelloWorld";

describe("HelloWorld", () => {
    const render = (props: HelloWorldProps): ShallowWrapper => shallow(<HelloWorld {...props} />);

    it("renders the structure correctly", () => {
        const helloWorldProps: HelloWorldProps = {
            name: "Mendix",
            style: [{ container: { borderColor: "white" }, label: { color: "black" } }]
        };
        const helloWorld = render(helloWorldProps);

        expect(helloWorld).toMatchSnapshot();
    });

    describe("for iOS", () => {
        beforeEach(() => {
            Platform.OS = "ios";
            Platform.select = jest.fn((dict: any) => dict[Platform.OS]);
        });

        it("renders the structure correctly", () => {
            const helloWorldProps: HelloWorldProps = {
                name: "Mendix",
                style: []
            };
            const helloWorld = render(helloWorldProps);

            expect(helloWorld).toMatchSnapshot();
        });
    });
});
